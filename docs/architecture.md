# Архитектура приложения AsuOpt

## 1. Обзор

Приложение AsuOpt предназначено для ведения списков устройств АСУ ТП и генерации сопутствующей документации. Оно построено по классической трехслойной архитектуре:

*   **Клиент (Frontend)**: Отвечает за пользовательский интерфейс, взаимодействие с пользователем и отправку запросов к серверу.
*   **Сервер (Backend)**: Реализует бизнес-логику, обрабатывает запросы клиента, взаимодействует с базой данных и генерирует документы.
*   **База данных (Database)**: Хранит информацию об устройствах и другие необходимые данные.

## 2. Клиентская часть (Frontend)

*   **Технология**: React (вероятно, с использованием TypeScript, судя по `client/tsconfig.json`).
*   **UI-библиотека**: Material-UI (упомянуто в `README.md`).
*   **Основные компоненты**:
    *   Древовидное меню для навигации по иерархии устройств (поиск, фильтрация).
    *   Панель детальной информации об устройстве (просмотр, редактирование).
    *   Интерфейс для настройки и запуска генерации документов (Excel, Word, PDF).
*   **Взаимодействие с сервером**: Через REST API (или GraphQL, если будет выбран) по HTTPS.

## 3. Серверная часть (Backend)

*   **Технология**: Node.js с фреймворком Express (упомянуто в `README.md`). (Возможно использование NestJS в будущем, как указано в `1.mdc`). Исходный код на TypeScript (`server/tsconfig.json`).
*   **Основные компоненты**:
    *   **API Layer**: Обработка запросов от клиента (`server/routes/`, `server/controllers/`). Эндпоинты для CRUD-операций с устройствами.
    *   **Бизнес-логика**: Валидация данных, реализация правил управления устройствами.
    *   **Модуль генерации документов**: Использование библиотек `ExcelJS`, `docx`, `PDFKit` (упомянуто в `1.mdc`).
    *   **Взаимодействие с БД**: Через ORM Sequelize (упомянуто в `README.md`) для работы с SQLite (`server/models/`).
*   **Документация API**: Рекомендуется использовать Swagger/OpenAPI (`3.mdc`).

## 4. База данных

*   **Тип**: Реляционная.
*   **Текущая реализация**: SQLite (`database.sqlite`, `server/database.sqlite`).
*   **Сетевой вариант**: PostgreSQL (как опция, `1.mdc`).
*   **Основная таблица**: `Devices` (детали см. в `docs/database.md`).
*   **Дополнительные таблицы (планируемые)**: Пользователи, роли, логи (`2.mdc`).

## 5. Взаимодействие слоев

*   **Frontend <-> Backend**: HTTPS API (REST/GraphQL).
*   **Backend <-> Database**: ORM (Sequelize).

## 6. Безопасность

*   **Аутентификация/Авторизация**: Планируется реализация (JWT/OAuth2, ролевая модель) (`2.mdc`).
*   **Защита**: Валидация ввода, защита от стандартных веб-уязвимостей (SQLi, XSS, CSRF) (`2.mdc`).
*   **Передача данных**: HTTPS (`2.mdc`).

## 7. Логирование и Мониторинг

*   Планируется внедрение централизованного логирования и мониторинга (`2.mdc`). Директория `server/logs/` уже существует.

## 8. Развертывание

*   Рекомендуется использовать Docker (`1.mdc`, `2.mdc`).
*   Рекомендуется внедрение CI/CD (`2.mdc`).
